- alias: "Telegram Remove Button"
  trigger:
  - platform: event
    event_type: telegram_callback
    event_data:
      data: '/remove_button'
  action:
  - service: telegram_bot.delete_message
    data_template:
      message_id: '{{ trigger.event.data.message.message_id }}'
      chat_id: '{{ trigger.event.data.user_id }}'
  - service: telegram_bot.send_message
    data_template:
      message: '{{ trigger.event.data.message.message }}'
      target: '{{ trigger.event.data.user_id }}'
      disable_notification: true

################################################################################
 
- alias: "Telegram Repeats Text"
  trigger:
    platform: event
    event_type: telegram_text
  action:
  - service: telegram_bot.send_message
    data_template:
      title: 'ℹ️ *Dumb automation*'
      message: 'You said: {{ trigger.event.data.text }}'
      target: '{{ trigger.event.data.user_id }}'
      disable_notification: true
      inline_keyboard:
        - "Edit message:/edit_msg, Don't:/do_nothing"
        - "Remove this button:/remove_button"
  - service: notify.pushbullet
    data_template:
      message: 'You said: {{ trigger.event.data.text }}'
  - service: persistent_notification.create
    data_template:
      message: 'You said: {{ trigger.event.data.text }}'

################################################################################

- alias: "Telegram Acknowledges"
  trigger:
    platform: event
    event_type: telegram_callback
    event_data:
      data: '/do_nothing'
  action:
  - service: telegram_bot.answer_callback_query
    data_template:
      callback_query_id: '{{ trigger.event.data.id }}'
      message: 'OK, as you said!'

################################################################################
